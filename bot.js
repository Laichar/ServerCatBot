const Discord = require('discord.js');
const client = new Discord.Client();
const config = require("./config.json");
client.on('ready', () => {
    console.log(`Logged in as ${client.user.tag}!`);
});

const prefix = ">>";
client.on("message", (message) => {
    const args = message.content.slice(prefix.length).trim().split(/ +/g);
    const command = args.shift().toLowerCase();
    if (!message.content.startsWith(prefix) || message.author.bot) return;
    if (message.content.startsWith(prefix + "ping")) {
        message.reply("Pong! :ping_pong:");
    } else
     if (message.content.startsWith(prefix + "foo")) {
        message.channel.send("bar!");
    }
    if(message.content.startsWith(prefix+"uwu")) {
        message.channel.send('uwu!');
    }
    if(message.content.startsWith(prefix+"dickytest")) {
    var titles = ["Aye","Aye","I will be sitting as an Independent\n\nI will be fighting for another term in my electorate\n\nI will not offer any formal deals to any party, instead I will work with groups of MPs on issues that matter to myself, and my division.","No","I've laid out my views on this bill during the second reading.\n\nI encourage my fellow members to side the Coalition majority, and vote down this ill-considered piece of legislation. United we stand, divided we fall.","I've made my opposition to leftist groups very clear, although what I'm standing for here is local communities, and their ability to maintain clean water. I don't care what green party groups think of me, I'm here representing my electorate, and I understand it has had a mixed reception at home, and nationwide, but it was a promise I was elected on, and I stick to my decision. It may be seen as short term thinking, but quite the contrary, it is in the long term interests of NSW agricultural land, and the people living on it.","I voted against the bill for a variety of reasons,\n\nCitizens in NSW whose water is being used by the Carmichael Mine, much of my electorate's water will be used, without any oversight, and they will not be able to contest, because their land is not being used.\n\nI promised the voters at the by-election that I would protect inland water sources, and I cannot vote away the right of NSW citizens to contest mines in Queensland that have an effect on our water system.","No","No","No, no","No","Thankyou for your service, as a top class speaker,\n\nI cannot wait to sit with you in parliament, and debate on the issues we both feel strongly about. We will be doubling the representation of Regional Aus in the coming days.","No","I enjoyed the debate, it's rare to have a proper discussion on an issue evokes such charged emotion from both sides.","Mr Speaker,\n\nIt's not my responsibility to argue against gay marriage, since I didn't introduce a bill, nor is it legal here, I'm arguing in favor of traditional marriage. I'm not personally married, so I not in a secret club with other heterosexual couples.\n\nAs I said in my final part, times have changed, but the base idea of marriage, not it's cultural interpretations throughout different nations and cultures, has continued on for centuries.","Given the current state of affairs, not just regarding moral legislation, but economic and domestic affairs, I don't see it as something they may do, once a government moves in a certain direction, it doesn't turn around without a significant political upheaval, the speed of the change just fluctuates depending on who is in charge.","If gender is no longer a rightful characteristic on which to base the government's enforcement of marriage, why not break down the restrictions on any other characteristics? Once the government begins removing restrictions on such institutions, not only are the institutions degraded, but such changes legitimizes further destruction of the institution.","Mr Speaker,\n\nHomosexuals can enjoy the same lavish ceremonies we do, enjoy the same financial benefits, be registered by the state, and within their own communities as couples. Nothing is being limited here, except the institution itself. Which, despite centuries of being the bedrock of functioning civilization, members are now so willing to change, despite a few decades ago almost everyone opposed it.\n\nIf everyone is able to participate in it, it ceases to be a special monument, a sacred bond between peoples, and just becomes another culture symbol which has been degraded by a never ending quest for a false sense of justice.\n\nCivilizations have risen and fallen, times have changed, humanity has grown, but marriage remains one of the few unchanging constants, undoubtedly a key role in the events that have preceded our ascension to the times we see today. The member for Melbourne has failed to provide any tangible reason to allow this change, beyond 'the time has come'.","The evolutionary purpose is, the cultural purpose and benefits to both society and the individuals involved are far wider, some of which I went into in my statement.","Mr Speaker,\n\nMarriage is a fundamental building block of our society, it is the key bond that holds the family unit together. This is something that has enriched and safeguarded the lives of families since this country was founded. Something that cannot be compared to anything else, or modified to fit a new interpretation of marriage, which the mainstream now sees as trendy. Marriage between a man and a women is sacred, and must be enshrined in our culture as one of the highest honors, and responsibilities. From the obligation to care for any children, to consummate the marriage, to the commitment to sexual fidelity, with the threat of divorce on the grounds of adultery, there is no way in which the union of a man and a woman, with all these serious implications, can be compared with the wish of a couple to solely see their partnership publicly recognised.\n\nBecause Mr Speaker, that's all this really is, homosexuals already have all the economic benefits provided by marriage, this is an empty attempt by the Greens to disrupt the government agenda, and push useless legislation to solve a non-issue.\n\nOrdinary people with deep feelings about the sanctity of marriage will also be demonised as homophobic and will be very lucky if they do not finish up accused of hate crime. Funny how the Greens think Australian free speech should be controlled by the government, because some people might take offence; but they have no problem going out of their way to grant rights to others, which will cause the exact same effect.\n\nThis bill defies the very purpose of marriage: the perpetuation of the human race and the raising of children.\n\nI welcome an honest debate with any member of the House, and I hope to enjoy many discussions with members from all parties over the next few days on an issue so many feel passionate about.","Could the member for ballarat give the House an overview of the bill, and what it intends to achieve?\n\n/u/lowkeyusername","Mr Speaker,\n\nI applaud this decision to streamline to legal system and begin removing the endless amounts of legal red type already in place to stop new projects being approved all across the country, allowing more groups to promote the creation of jobs, especially in regional Australia.","Aye","Aye","Aye","Aye","Aye","Mr Speaker,\n\nI move an amendment on this bill,\n\nDefintions\n\n'Couple'\n\nOmit \"two married people who live at the same address\"\n\nSubtitute \"two adults who are married to each other, with a same address\"","Hear Hear","Hear hear","Mr Speaker,\n\nJust because an organization supports a measure, that does not give them the right to be exempt from any criticism, or exempt the law from dissection by federal parliament. I am willing to meet the Member for Melbourne privately, or have a debate with him, where I will lay out all the reasons for this bill, which are supported by the governments' HEALTH MINISTRY, and not an unaccountable organization.","Mr Speaker,\n\nThere is only one thing shameful in this debate, and it's not any reference i've made;\n\nPicture the scene, it's 2017, just after the election, and big government is collaborating with nasty corporations to pollute our water supply with neurotoxins with NO oversight! and Mr Speaker, they ask me, is it Adani? is it nuclear waste runoff? NO! It's a routine water fluoride dump in our towns and cities all over the country!\n\nAnd Mr Speaker, that's not even the best part! The Greens are actually supporting these moves! Maybe if we called water fluoridation the Great Artesian fluoridation program, or sold a contract for it to Adani, they would lock themselves to the gates of these plants! However, just because a Coalition MP introduces it, they can't bring themselves to even consider it, Victoria truly has lost their minds.","Mr Speaker,\n\nIf a woman runs into a local police station, and says a man working in the store opposite raped her, and another man walking along the street verifies her story, they will arrest him. There's no solid proof of a widespread problem, but there are significant studies showing a risk, this is a major operation in this country, and I think we can agree any threat must be dealt with swiftly.","Hear hear","I nominate the Member for Brisbane, /u/WhiteMaleOffendotron to serve as Deputy Chairman of the House","I shall amend the legislation in the next reading with any format issues, although the Health Minister will be dealing with the issue of water contaminant limits in the future I believe.","Mr Speaker\n\nThere is no choice regarding water fluoridation, almost all communities are mandated to provide it with little to no oversight.","Mr Speaker,\n\nThe inability to contain fluoride levels in individual households to below the safe number, leads to several health threats, such as lower IQ in children, and increased risk of hyperthyroidism. Both serious health concerns, which need to taken into consideration when looking at this legislation.\n\nMETA: The study links are on the relevant health problems, but the colour isn't noticeable in this theme","Mr Speaker,\n\nYou don't need to have a PhD in Engineering to understand basic physical science, not matter how much you regulate the amounts being put in at the source, you cannot confirm that each house will receive an equal amount, without monitor systems inside every house pipe in Australia.","Mr Speaker,\n\nThe Coalition will be announcing legislation on the matter in a future bill, the Coalition made a clear commitment to border security during the election, and funding changes for them will be announced in the budget.","I don't usually expect the Greens to recognize anything out of view of a skyscraper, although I would like to note both his bills are still waiting for just one sponsor.","I was referring to the Member for Ballarat, who despite representing the majority of Victoria since the election, has failed to make any impact in the House.","Mr Speaker,\n\nAny changes will be enforceable on a case-by-case basis at the discretion of the officer on duty, although they will be able to use the location of travel to discern any threat to Australian health, as they would do in any situation. Australia already has strong border protections for incoming people depending on their nation of origin.","Will there be a post about how Labor have failed South Australia? Or the Greens failing Vic?\n\nOr is critique reserved solely for parties that support Coalition legislation","Mr Speaker,\n\nThis bill should be a routine change to welfare regulation, usually Labor would be championing expanding access to welfare, especially for working class children.\n\nThe government will be increasing the power of border control officers to keep those infected with diseases out of the country in future legislation, which will ensure any risk of an outbreak is kept to an absolute minimum.","Mr Speaker,\n\nThe quote I was referring to:\n\nIf you ask anyone in their 70's what they are happiest about their grandchildren having access to today; it is water that protects their teeth\n\nI withdraw the comment about the member seeing it as a landmark, but I reject his claim regarding those in their 70's\n\nThere is no way of applying equal amounts of fluoride to each household within an area being fluoridated, with potentially large quantities of fluoride being applied to households with no internal oversight, it is a public health concern.","Mr Speaker,\n\nNJNP only affects citizens who claim certain benefits and take advantage of certain government programs, which is almost entirely working class citizens. As the member says, the number of working class families who reject vaccinations is almost nil, so I'm sure they will have no problems with allowing poor children access to necessary benefits, while still maintaining herd immunity.","Mr Speaker,\n\nThere are is no consensus within the dental profession that water fluoridation is a major safeguard of dental health, and given almost all Australians have access to the toothpaste and mouthwash I doubt we'll see any measurable change in dental costs.\n\nAlthough it doesn't surprise me that Labor have, in the most free, prosperous and beautiful country on earth, cited water fluoridation as the government's landmark achievement over the last 50 years.","Mr Speaker,\n\nAs the minister responsible for Water Resources, and with approval of the Minister responsible for Health and Social Services, I give the government's short overview of the bill.\n\nCiting several state-approved studies both recently and within the last 50 years, the the government moves to ban water fluoridation until such a time when the practice is deemed safe. The government will also be commissioning a review of the practice, and its effects on both urban and rural communities, which will form the basis of any future government ruling on water fluoridation.\n\nI will be present in the discord sitting this evening to discuss the science behind the move, and myself, with the Minister for Health, Senator /u/Spritezade , are willing to answer any queries on the subreddit.","Mr Speaker,\n\nAll this bill does is remove federal regulations on those who don't vaccinate, state's will still have standing legislation enforced on the matter. Vaccines are still on every doctor's to-do list, and almost all children will still receive vaccines.\n\nThe average family NJNP affects, are working class children with single mothers, who are the most at risk from malnutrition and low quality of life due to financial problems. Stopping benefits being provided to this group, because they don't want their children to be forcefully medicated (which won't matter because herd immunity protects a sizable group of the population anyway), is the opposite of what the opposition parties claim to stand for.","I, /u/Kaarrien , do swear that I will be faithful and bear true allegiance to Queen Elizabeth our Sovereign, their heirs and successors according to law. SO HELP ME GOD.","Thankyou to the voters in Macquarie for this honor,","Error: Protect instead of Protecting.","I voted","LNP or Nationals here please"];

    var terminals = {};
    var startwords = [];
    var wordstats = {};

    for (var i = 0; i < titles.length; i++) {
        var words = titles[i].split(' ');
        terminals[words[words.length-1]] = true;
        startwords.push(words[0]);
        for (var j = 0; j < words.length - 1; j++) {
            if (wordstats.hasOwnProperty(words[j])) {
                wordstats[words[j]].push(words[j+1]);
            } else {
                wordstats[words[j]] = [words[j+1]];
            }
        }
    }

    var choice = function (a) {
        var i = Math.floor(a.length * Math.random());
        return a[i];
    };

    var make_title = function (min_length) {
        word = choice(startwords);
        var title = [word];
        while (wordstats.hasOwnProperty(word)) {
            var next_words = wordstats[word];
            word = choice(next_words);
            title.push(word);
            if (title.length > min_length && terminals.hasOwnProperty(word)) break;
        }
        if (title.length < min_length) return make_title(min_length);
        return title.join(' ');
    };
    var title = make_title();
    message.channel.send(title);
    }
});

client.login(config.token);